# ‚úÖ CHECKLIST P√ìS-DEPLOY - BDC CLASSIFICADOS

**Data**: 02 de Janeiro de 2025
**Dom√≠nio**: www.buscaaquibdc.com
**Status Git**: ‚úÖ Atualizado (commit 44fd9aa)
**Deploy**: üîÑ Aguardando build na Vercel

---

## üìã ETAPA 1: VERIFICAR BUILD NA VERCEL (AGORA)

### Acessar Dashboard Vercel
1. üîó **URL**: https://vercel.com/dashboard
2. Localizar projeto **BDC** ou **bdc-classificados**
3. Ver status do deployment mais recente

### Verifica√ß√µes no Dashboard:
- [ ] Status: **Ready** (verde)
- [ ] Build Time: < 5 minutos
- [ ] Domains: www.buscaaquibdc.com configurado
- [ ] Environment Variables: 12 vari√°veis configuradas

### Se Build Falhar:
```bash
# Ver logs de erro
# No dashboard Vercel > Deployments > [√∫ltimo deploy] > View Function Logs

# Principais causas poss√≠veis:
1. Vari√°veis de ambiente faltando
2. Erro de TypeScript n√£o detectado no build local
3. Timeout no build (improv√°vel, build local levou < 2min)
```

---

## üìã ETAPA 2: CONFIGURAR VARI√ÅVEIS DE AMBIENTE (SE NECESS√ÅRIO)

### No Dashboard Vercel > Settings > Environment Variables

Adicionar/Verificar todas as 12 vari√°veis:

```env
NEXT_PUBLIC_SUPABASE_URL=https://xjguzxwwydlpvudwmiyv.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhqZ3V6eHd3eWRscHZ1ZHdtaXl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyMzI2MDAsImV4cCI6MjA2MzgwODYwMH0.GidrSppfX5XHyu5SeYcML3gmNNFXbouYWxFBG-UZlco
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhqZ3V6eHd3eWRscHZ1ZHdtaXl2Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0ODIzMjYwMCwiZXhwIjoyMDYzODA4NjAwfQ.wm7fMtIFoq2VklMYXGhSfok8fFwX2tw6ZuEiHxaNqHE

NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://www.buscaaquibdc.com
NEXT_PUBLIC_SITE_URL=https://www.buscaaquibdc.com
JWT_SECRET=bdc_jwt_super_secret_production_2024_maranhao

RESEND_API_KEY=re_6ZQPbka7_AyzN2wnkpQjc5Y26CFdY3qFF
RESEND_FROM_EMAIL=noreply@buscaaquibdc.com

ASAAS_API_KEY=prod_000MzkwODA2MWY2OGM3MWRlMDU2NWM3MzJlNzZmNGZhZGY6OjNiZmZlNzcyLTZiZWEtNDhlNC05NjMxLTY0M2JkY2I5YjM3NTo6JGFhY2hfNTJiYjkzYjgtZDBhMi00ZjM0LWFmYjMtMmYzOWQ1NDY4MzE3
ASAAS_API_URL=https://api.asaas.com/v3
ASAAS_WEBHOOK_SECRET=bdc_webhook_secret_prod_2024_asaas_maranhao
```

**Importante**: Todas devem estar em **Production** e **Preview**

---

## üìã ETAPA 3: CONFIGURAR DOM√çNIO (SE N√ÉO ESTIVER)

### No Dashboard Vercel > Settings > Domains

1. **Adicionar dom√≠nio principal**:
   - Dom√≠nio: `www.buscaaquibdc.com`
   - Redirect: N√£o

2. **Adicionar dom√≠nio sem www** (opcional):
   - Dom√≠nio: `buscaaquibdc.com`
   - Redirect to: `www.buscaaquibdc.com`

### Configurar DNS (No provedor do dom√≠nio)

```dns
# Se usar A Record (IP da Vercel):
A       @       76.76.21.21         TTL: 3600
CNAME   www     cname.vercel-dns.com   TTL: 3600

# OU se usar CNAME (mais recomendado):
CNAME   www     cname.vercel-dns.com   TTL: 3600
```

**Nota**: Propaga√ß√£o DNS pode levar at√© 24 horas, mas geralmente 10-30 minutos.

---

## üìã ETAPA 4: TESTES B√ÅSICOS (5 MINUTOS)

### 4.1 Acessar o Site

üîó **Acessar**: https://www.buscaaquibdc.com

**Verifica√ß√µes visuais**:
- [ ] Home carrega sem erros
- [ ] Logo aparece
- [ ] Categorias aparecem (75 categorias)
- [ ] Cidades aparecem (55 cidades)
- [ ] Footer carrega
- [ ] Nenhum erro no console do browser (F12)

### 4.2 Testar APIs P√∫blicas

**Abrir console do browser (F12) e testar**:

```javascript
// Teste 1: Categorias
fetch('https://www.buscaaquibdc.com/api/categories/list')
  .then(r => r.json())
  .then(d => console.log('Categorias:', d.categories?.length))

// Teste 2: Cidades
fetch('https://www.buscaaquibdc.com/api/cities/list')
  .then(r => r.json())
  .then(d => console.log('Cidades:', d.cities?.length))

// Teste 3: Planos
fetch('https://www.buscaaquibdc.com/api/plans/list')
  .then(r => r.json())
  .then(d => console.log('Planos:', d.plans?.length))

// Teste 4: An√∫ncios
fetch('https://www.buscaaquibdc.com/api/ads')
  .then(r => r.json())
  .then(d => console.log('An√∫ncios:', d.ads?.length))
```

**Resultados esperados**:
- Categorias: 75
- Cidades: 55
- Planos: 5
- An√∫ncios: 0 ou mais (dependendo do banco)

### 4.3 Testar P√°ginas Principais

**Navegar e verificar**:
- [ ] **/login** - P√°gina de login carrega
- [ ] **/cadastro** - Formul√°rio de registro aparece
- [ ] **/planos** - Lista de planos aparece
- [ ] **/anuncios** - Lista de an√∫ncios (pode estar vazia)
- [ ] **/categorias** - Grid de categorias
- [ ] **/ajuda** - Central de ajuda
- [ ] **/como-funciona** - P√°gina informativa

---

## üìã ETAPA 5: TESTE DE REGISTRO COMPLETO (10 MINUTOS)

### 5.1 Criar Conta de Teste

1. Acessar: https://www.buscaaquibdc.com/cadastro
2. Preencher formul√°rio:
   - Nome: Teste BDC
   - Email: teste@buscaaquibdc.com
   - Senha: Teste123!
   - Telefone: (99) 99999-9999
   - Cidade: Balsas
3. Clicar em "Criar Conta"

**Verifica√ß√µes**:
- [ ] Registro bem-sucedido
- [ ] Redirecionado para dashboard ou home
- [ ] Email de boas-vindas recebido (verificar inbox)

### 5.2 Fazer Login

1. Acessar: https://www.buscaaquibdc.com/login
2. Login com credenciais criadas
3. Verificar acesso ao painel

**Verifica√ß√µes**:
- [ ] Login bem-sucedido
- [ ] Dashboard do anunciante carrega
- [ ] Estat√≠sticas aparecem (zeradas)
- [ ] Menu lateral funciona

### 5.3 Criar An√∫ncio de Teste

1. Acessar: Painel > Criar An√∫ncio
2. Preencher:
   - T√≠tulo: "Teste de An√∫ncio BDC"
   - Descri√ß√£o: "An√∫ncio criado para valida√ß√£o"
   - Categoria: Selecionar qualquer
   - Cidade: Balsas
   - Pre√ßo: R$ 100,00
3. Upload de 1 imagem (qualquer)
4. Publicar

**Verifica√ß√µes**:
- [ ] Upload de imagem funciona
- [ ] An√∫ncio criado com status "pendente"
- [ ] Aparece em "Meus An√∫ncios"

---

## üìã ETAPA 6: CONFIGURAR WEBHOOK ASAAS (5 MINUTOS)

### 6.1 Acessar Painel Asaas

üîó **URL**: https://www.asaas.com/config/webhooks

### 6.2 Adicionar Webhook

**Configura√ß√µes**:
- **URL**: `https://www.buscaaquibdc.com/api/webhooks/asaas`
- **Vers√£o**: v3
- **Token de Acesso**: `bdc_webhook_secret_prod_2024_asaas_maranhao`

**Eventos para marcar**:
- ‚úÖ PAYMENT_RECEIVED
- ‚úÖ PAYMENT_CONFIRMED
- ‚úÖ PAYMENT_OVERDUE
- ‚úÖ PAYMENT_DELETED
- ‚úÖ PAYMENT_RESTORED

### 6.3 Testar Webhook

**No painel Asaas**:
1. Criar cobran√ßa teste de R$ 1,00
2. Marcar como "Pago manualmente"
3. Verificar se webhook foi enviado

**Ou via cURL**:
```bash
curl -X POST https://www.buscaaquibdc.com/api/webhooks/asaas \
  -H "Content-Type: application/json" \
  -H "asaas-access-token: bdc_webhook_secret_prod_2024_asaas_maranhao" \
  -d '{
    "event": "PAYMENT_RECEIVED",
    "payment": {
      "id": "pay_test123",
      "value": 1.00,
      "status": "RECEIVED"
    }
  }'
```

**Verifica√ß√£o**:
- [ ] Retorna 200 OK
- [ ] Logs na Vercel mostram processamento

---

## üìã ETAPA 7: TESTE ADMIN (5 MINUTOS)

### 7.1 Tornar Usu√°rio Admin

**Executar no Supabase SQL Editor**:
```sql
-- Atualizar usu√°rio teste para admin
UPDATE users
SET is_admin = true,
    role = 'admin'
WHERE email = 'teste@buscaaquibdc.com';
```

### 7.2 Acessar √Årea Admin

1. Logout do usu√°rio normal
2. Login novamente
3. Acessar: https://www.buscaaquibdc.com/admin

**Verifica√ß√µes**:
- [ ] Dashboard admin carrega
- [ ] Estat√≠sticas aparecem
- [ ] Menu admin funciona
- [ ] Lista de an√∫ncios pendentes mostra o teste

### 7.3 Aprovar An√∫ncio de Teste

1. Admin > An√∫ncios
2. Localizar an√∫ncio de teste
3. Clicar em "Aprovar"

**Verifica√ß√µes**:
- [ ] An√∫ncio aprovado com sucesso
- [ ] Status muda para "Aprovado"
- [ ] Aparece na home do site

---

## üìã ETAPA 8: VALIDA√á√ÉO SUPABASE (5 MINUTOS)

### 8.1 Verificar CORS do Storage

**No Supabase Dashboard**:
1. Storage > Configuration > CORS
2. Adicionar origem permitida:
   - `https://www.buscaaquibdc.com`
   - `https://buscaaquibdc.com`

### 8.2 Testar Upload

**No site**:
1. Editar an√∫ncio teste
2. Adicionar mais uma imagem
3. Salvar

**Verifica√ß√£o**:
- [ ] Upload funciona sem erro CORS
- [ ] Imagem aparece no an√∫ncio

### 8.3 Verificar Buckets

**No Supabase Dashboard > Storage**:

Confirmar que buckets est√£o p√∫blicos:
- [ ] `avatars` - P√∫blico
- [ ] `businesses` - P√∫blico
- [ ] `ads` - P√∫blico
- [ ] `highlights` - P√∫blico
- [ ] `banners` - P√∫blico
- [ ] `categories` - P√∫blico
- [ ] `logos` - P√∫blico

---

## üìã ETAPA 9: TESTE DE PAGAMENTO (10 MINUTOS)

### 9.1 Selecionar Plano

1. Login como usu√°rio normal
2. Painel > Planos
3. Selecionar plano "Micro-Empresa" (R$ 19,90)

### 9.2 Gerar PIX de Teste

1. M√©todo: PIX
2. Confirmar dados
3. Gerar QR Code

**Verifica√ß√µes**:
- [ ] QR Code gerado
- [ ] Copy-paste do c√≥digo PIX funciona
- [ ] Cobran√ßa criada no Asaas

### 9.3 Simular Pagamento

**No painel Asaas**:
1. Localizar cobran√ßa
2. Marcar como "Confirmado"
3. Aguardar webhook

**Verifica√ß√µes**:
- [ ] Webhook recebido (ver logs Vercel)
- [ ] Status da assinatura atualizado no banco
- [ ] Email de confirma√ß√£o enviado
- [ ] Limites do plano ativados

---

## üìã ETAPA 10: MONITORAMENTO (PRIMEIRAS 24H)

### 10.1 Logs da Vercel

**Verificar regularmente**:
```
Vercel Dashboard > Deployments > [√∫ltimo] > Runtime Logs
```

**Procurar por**:
- ‚ùå Erros 500
- ‚ö†Ô∏è Erros de conex√£o Supabase
- ‚ö†Ô∏è Timeouts
- ‚ö†Ô∏è Memory issues

### 10.2 Performance

**Verificar m√©tricas**:
- Tempo de resposta m√©dio: < 1s
- First Load: < 3s
- Largest Contentful Paint: < 2.5s

**Ferramentas**:
- Vercel Analytics (dashboard)
- Google PageSpeed Insights
- Chrome DevTools (Network tab)

### 10.3 Supabase

**Dashboard Supabase > Database**:
- Verificar queries lentas
- Monitorar uso de conex√µes
- Verificar tamanho do banco

---

## üìã ETAPA 11: TESTES MOBILE (10 MINUTOS)

### 11.1 PWA Install

**No smartphone**:
1. Acessar www.buscaaquibdc.com no Chrome
2. Verificar se aparece banner "Adicionar √† tela inicial"
3. Instalar PWA

**Verifica√ß√µes**:
- [ ] Banner de install aparece
- [ ] Instala como app
- [ ] √çcone criado na home
- [ ] Abre em fullscreen

### 11.2 Testar Funcionalidades

**No app instalado**:
- [ ] Login funciona
- [ ] Criar an√∫ncio funciona
- [ ] Upload de foto da c√¢mera
- [ ] Busca funciona
- [ ] WhatsApp button abre app

---

## üìã CHECKLIST FINAL DE PRODU√á√ÉO

### Infraestrutura ‚úÖ
- [ ] Deploy bem-sucedido na Vercel
- [ ] Dom√≠nio www.buscaaquibdc.com acess√≠vel
- [ ] SSL/HTTPS ativo e funcionando
- [ ] DNS propagado corretamente

### APIs e Integrations ‚úÖ
- [ ] Supabase conectado e respondendo
- [ ] APIs p√∫blicas funcionando (200 OK)
- [ ] APIs protegidas retornando 401 sem auth
- [ ] Webhook Asaas configurado e testado
- [ ] Resend enviando emails

### Funcionalidades Core ‚úÖ
- [ ] Registro de usu√°rio funciona
- [ ] Login funciona
- [ ] Cria√ß√£o de an√∫ncio funciona
- [ ] Upload de imagens funciona
- [ ] Aprova√ß√£o admin funciona
- [ ] Processo de pagamento funciona

### Performance ‚úÖ
- [ ] Home carrega em < 3s
- [ ] APIs respondem em < 1s
- [ ] Imagens otimizadas carregando
- [ ] Sem erros no console

### SEO e PWA ‚úÖ
- [ ] Meta tags carregando
- [ ] PWA instal√°vel
- [ ] Manifest v√°lido
- [ ] Service Worker ativo

---

## üö® PROBLEMAS COMUNS E SOLU√á√ïES

### Problema 1: "Application Error" na Vercel
**Causa**: Vari√°veis de ambiente faltando
**Solu√ß√£o**:
1. Vercel Dashboard > Settings > Environment Variables
2. Adicionar todas as 12 vari√°veis
3. Redeploy: Deployments > ... > Redeploy

### Problema 2: Imagens n√£o carregam
**Causa**: CORS do Supabase Storage
**Solu√ß√£o**:
1. Supabase > Storage > Configuration > CORS
2. Adicionar: https://www.buscaaquibdc.com

### Problema 3: APIs retornam 500
**Causa**: Erro de conex√£o Supabase ou JWT
**Solu√ß√£o**:
1. Verificar NEXT_PUBLIC_SUPABASE_URL
2. Verificar SUPABASE_SERVICE_ROLE_KEY
3. Ver logs: Vercel > Runtime Logs

### Problema 4: Webhook n√£o chega
**Causa**: URL incorreta ou token inv√°lido
**Solu√ß√£o**:
1. Confirmar URL: https://www.buscaaquibdc.com/api/webhooks/asaas
2. Confirmar token: bdc_webhook_secret_prod_2024_asaas_maranhao
3. Testar manualmente com cURL

### Problema 5: Emails n√£o enviam
**Causa**: RESEND_API_KEY inv√°lida
**Solu√ß√£o**:
1. Verificar key no Resend Dashboard
2. Confirmar dom√≠nio verificado
3. Verificar RESEND_FROM_EMAIL

---

## üìû SUPORTE E RECURSOS

### Documenta√ß√£o
- üìÑ [VALIDATION_FINAL_REPORT.md](./VALIDATION_FINAL_REPORT.md) - Relat√≥rio de valida√ß√£o
- üìÑ [DEPLOY_GUIDE.md](./DEPLOY_GUIDE.md) - Guia completo de deploy
- üìÑ [VALIDACAO_REVISAO_FINAL.md](./VALIDACAO_REVISAO_FINAL.md) - Revis√£o final

### Dashboards
- üîó Vercel: https://vercel.com/dashboard
- üîó Supabase: https://app.supabase.com
- üîó Asaas: https://www.asaas.com
- üîó Resend: https://resend.com

### Logs e Monitoramento
```bash
# Ver logs da Vercel via CLI
vercel logs --follow

# Filtrar erros
vercel logs --filter error

# Logs de build
vercel logs --build
```

---

## ‚úÖ CERTIFICA√á√ÉO DE DEPLOY

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                              ‚ïë
‚ïë              CHECKLIST P√ìS-DEPLOY COMPLETO                   ‚ïë
‚ïë                                                              ‚ïë
‚ïë            www.buscaaquibdc.com - EM PRODU√á√ÉO                ‚ïë
‚ïë                                                              ‚ïë
‚ïë  Ap√≥s completar todos os itens deste checklist, o sistema    ‚ïë
‚ïë  estar√° 100% validado em ambiente de produ√ß√£o.               ‚ïë
‚ïë                                                              ‚ïë
‚ïë  Tempo estimado: 60-90 minutos                               ‚ïë
‚ïë                                                              ‚ïë
‚ïë  Data: 02 de Janeiro de 2025                                 ‚ïë
‚ïë  Preparado por: Claude Code AI Assistant                     ‚ïë
‚ïë                                                              ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

**√öltima Atualiza√ß√£o**: 02/01/2025 √†s 20:45 UTC
**Status**: üîÑ Aguardando deploy na Vercel
